# 无畏契约每日商店插件

一个用于查询无畏契约(Valorant)每日商店的AstrBot插件，支持自动化扫码登录、图片生成和商店监控功能。

## 功能特性

### 🎯 商店查询
- **每日商店查询**：获取当日商店皮肤信息
- **精美图片生成**：自动生成高质量的商店展示图片
- **@功能支持**：支持查询其他用户的商店
- **智能配置识别**：支持多种格式的配置信息解析

### 🔍 商店监控
- **商品监控**：添加想要监控的皮肤或武器
- **自动查询**：每天定时检查商店更新
- **智能通知**：监控商品上架时自动通知
- **监控列表管理**：添加、删除、查看监控项
- **静默运行**：无匹配商品时不打扰用户

### 🤖 自动化登录
- **无头浏览器**：后台自动化扫码登录
- **二维码登录**：发送二维码图片，30秒内扫码即可绑定
- **安全存储**：加密保存用户配置信息
- **配置验证**：自动检测配置有效性

## 使用方法

### 1. 自动化登录绑定（推荐）

在任意聊天中发送：
```
/瓦
```

**自动化流程**：
1. 插件启动无头浏览器访问QQ登录页面
2. 自动截取二维码图片并发送给您
3. 提示"请在30秒内扫码登录"
4. 使用手机QQ扫描二维码并确认登录
5. 插件自动检测登录状态并获取配置信息
6. 自动保存userId和tid到数据库
7. 发送登录成功确认消息

### 2. 查询商店

**查询自己的商店**：
```
/每日商店
```

**查询他人商店**：
```
/每日商店 @某人
```

### 3. 商店监控（v3.0.0新增）

**查看监控帮助**：
```
/商店监控
```

**添加监控项**：
```
/商店监控 添加 "侦察力量 幻象"
/商店监控 添加 "盖世英雄 冥驹"
```

**删除监控项**：
```
/商店监控 删除 "侦察力量 幻象"
```

**查看监控列表**：
```
/商店监控 列表
```

**开启自动查询**：
```
/商店监控 开启
```

**关闭自动查询**：
```
/商店监控 关闭
```

### 监控配置
- **monitor_time**：设置每日自动监控的时间，格式为HH:MM，默认"08:01"

**示例配置**：
```json
{
    "monitor_time": {
        "description": "商店监控时间",
        "type": "string",
        "hint": "设置每日自动监控的时间，格式为HH:MM，如08:01",
        "default": "08:01"
    }
}
```

### 常见问题

**Q: 提示"您尚未绑定账户信息"**
A: 使用 `/瓦` 指令进行自动化扫码登录绑定

**Q: 二维码登录失败**
A: 尝试以下方法：
   - 确保在30秒内扫码
   - 检查网络连接是否正常
   - 重新发送 `/瓦` 命令

**Q: 提示"配置过期或网络问题"**
A: 使用 `/瓦` 指令重新进行自动化登录

**Q: 图片显示异常或文字乱码**
A: 检查插件目录下是否存在 `fontFamily.ttf` 字体文件

**Q: 监控功能不工作**
A: 尝试以下方法：
   - 确保已开启自动查询：`/商店监控 开启`
   - 检查监控列表是否为空：`/商店监控 列表`
   - 确认监控时间设置是否正确

**Q: 二维码登录失败或浏览器相关错误**
A: 尝试以下方法：
   - 确保已安装Playwright浏览器：`playwright install chromium`
   - 检查网络连接是否正常
   - 重新发送 `/瓦` 命令
   - 查看AstrBot日志获取详细错误信息

**Q: @功能不工作**
A: 确保聊天平台支持@功能，部分平台可能不支持
