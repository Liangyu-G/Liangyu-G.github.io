import{_ as e,c as d,o,ae as c}from"./chunks/framework.Ck3L_38O.js";const u=JSON.parse('{"title":"聚合解析流媒体平台链接，转换为媒体直链发送","description":"","frontmatter":{},"headers":[],"relativePath":"解析流媒体平台链接.md","filePath":"解析流媒体平台链接.md"}'),r={name:"解析流媒体平台链接.md"};function a(l,t,s,i,n,h){return o(),d("div",null,[...t[0]||(t[0]=[c('<h1 id="聚合解析流媒体平台链接-转换为媒体直链发送" tabindex="-1">聚合解析流媒体平台链接，转换为媒体直链发送 <a class="header-anchor" href="#聚合解析流媒体平台链接-转换为媒体直链发送" aria-label="Permalink to &quot;聚合解析流媒体平台链接，转换为媒体直链发送&quot;">​</a></h1><h2 id="使用说明" tabindex="-1">使用说明 <a class="header-anchor" href="#使用说明" aria-label="Permalink to &quot;使用说明&quot;">​</a></h2><h3 id="⚙️-优化体验" tabindex="-1">⚙️ 优化体验 <a class="header-anchor" href="#⚙️-优化体验" aria-label="Permalink to &quot;⚙️ 优化体验&quot;">​</a></h3><ul><li>配置 <strong>缓存目录</strong></li><li>打开 <strong>预下载模式</strong></li></ul><blockquote><p><strong>由于消息平台使用直链发送媒体的局限性（无法指定 header、referer、cookie 等参数）：</strong></p><ul><li>部分风控严格的平台会返回 403 Forbidden，此时需要先将媒体下载到本地再发送</li></ul><p><strong>已知受影响的平台包括：</strong></p><ul><li>部分小红书媒体（视频/图片）</li><li>全部微博视频</li></ul></blockquote><hr><h2 id="支持的流媒体平台" tabindex="-1">支持的流媒体平台 <a class="header-anchor" href="#支持的流媒体平台" aria-label="Permalink to &quot;支持的流媒体平台&quot;">​</a></h2><table class="config-table"><thead><tr><th>平台</th><th>支持的链接类型</th><th>可解析的媒体类型</th></tr></thead><tbody><tr><td class="center"><strong>B站</strong></td><td>短链（<code>b23.tv/...</code>）<br>视频av号（<code>www.bilibili.com/video/av...</code>）<br>视频BV号（<code>www.bilibili.com/video/BV...</code>）<br>动态长链（<code>www.bilibili.com/opus/...</code>）<br>动态短链（<code>t.bilibili.com/...</code>）<br>小程序卡片（<code>message.meta.detail_1.qqdocurl</code>）</td><td class="center">视频、图片</td></tr><tr><td class="center"><strong>抖音</strong></td><td>短链（<code>v.douyin.com/...</code>）<br>视频长链（<code>www.douyin.com/video/...</code>）<br>图集长链（<code>www.douyin.com/note/...</code>）</td><td class="center">视频、图片</td></tr><tr><td class="center"><strong>快手</strong></td><td>短链（<code>v.kuaishou.com/...</code>）<br>视频长链（<code>www.kuaishou.com/short-video/...</code>）</td><td class="center">视频、图片</td></tr><tr><td class="center"><strong>微博</strong></td><td>桌面端博客链接（<code>weibo.com/...</code>）<br>移动端博客链接（<code>m.weibo.cn/detail/...</code>）<br>移动端视频分享链接（<code>video.weibo.com/show?fid=...</code>）<br>视频分享链接重定向（<code>weibo.com/tv/show/...</code>）<br>小程序卡片（<code>message.meta.detail_1.qqdocurl</code>）</td><td class="center">视频、图片</td></tr><tr><td class="center"><strong>小红书</strong></td><td>短链（<code>xhslink.com/...</code>）<br>笔记长链（<code>www.xiaohongshu.com/explore/...</code>）<br>笔记长链（<code>www.xiaohongshu.com/discovery/item/...</code>）<br>小程序卡片（<code>message.meta.news.jumpUrl</code>）</td><td class="center">视频、图片</td></tr><tr><td class="center"><strong>推特</strong></td><td>twitter 链接（<code>twitter.com/.../status/...</code>）<br>x 链接（<code>x.com/.../status/...</code>）</td><td class="center">视频、图片</td></tr></tbody></table><h3 id="基础配置" tabindex="-1">基础配置 <a class="header-anchor" href="#基础配置" aria-label="Permalink to &quot;基础配置&quot;">​</a></h3><table class="config-table"><thead><tr><th>配置项</th><th>类型</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>是否将解析结果打包为消息集合</td><td class="center"><code>bool</code></td><td class="center"><code>true</code></td><td>在微信平台使用时需要禁用此项</td></tr></tbody></table><h3 id="触发设置" tabindex="-1">触发设置 <a class="header-anchor" href="#触发设置" aria-label="Permalink to &quot;触发设置&quot;">​</a></h3><table class="config-table"><thead><tr><th>配置项</th><th>类型</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>是否自动解析视频链接</td><td class="center"><code>bool</code></td><td class="center"><code>true</code></td><td>-</td></tr><tr><td>手动触发解析的关键词列表</td><td class="center"><code>list</code></td><td class="center"><code>[&quot;视频解析&quot;, &quot;解析视频&quot;]</code></td><td>当禁用自动解析时，消息头使用这些关键词才会触发解析</td></tr></tbody></table><h3 id="视频大小设置" tabindex="-1">视频大小设置 <a class="header-anchor" href="#视频大小设置" aria-label="Permalink to &quot;视频大小设置&quot;">​</a></h3><table class="config-table"><thead><tr><th>配置项</th><th>类型</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>最大允许发送的视频大小(MB)</td><td class="center"><code>float</code></td><td class="center"><code>500.0</code></td><td>超过此大小的视频将被跳过，不下载也不发送。设置为0表示不限制</td></tr><tr><td>大视频阈值(MB)</td><td class="center"><code>float</code></td><td class="center"><code>100.0</code></td><td>当视频大小超过此阈值时，将下载到缓存目录。视频会单独发送而不包含在转发消息集合中。不能超过消息适配器100MB硬性阈值。设置为0表示不限制</td></tr></tbody></table><h3 id="下载和缓存设置" tabindex="-1">下载和缓存设置 <a class="header-anchor" href="#下载和缓存设置" aria-label="Permalink to &quot;下载和缓存设置&quot;">​</a></h3><table class="config-table"><thead><tr><th>配置项</th><th>类型</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>媒体文件缓存目录</td><td class="center"><code>string</code></td><td class="center"><code>&quot;/app/sharedFolder/video_parser/cache&quot;</code></td><td>用于推特视频和所有超过阈值的大媒体（视频和图片）</td></tr><tr><td>是否预先下载所有媒体到本地</td><td class="center"><code>bool</code></td><td class="center"><code>false</code></td><td>启用后，所有媒体文件将并发下载到缓存目录，发送时使用本地路径。可以提高发送成功率，减少总下载时间，但会短时间增加磁盘占用</td></tr><tr><td>最大并发下载数</td><td class="center"><code>int</code></td><td class="center"><code>3</code></td><td>当启用预先下载所有媒体到本地时，同时下载的媒体文件数量上限。建议值：3-5</td></tr></tbody></table><h3 id="解析器启用设置" tabindex="-1">解析器启用设置 <a class="header-anchor" href="#解析器启用设置" aria-label="Permalink to &quot;解析器启用设置&quot;">​</a></h3><table class="config-table"><thead><tr><th>配置项</th><th>类型</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>是否启用B站解析器</td><td class="center"><code>bool</code></td><td class="center"><code>true</code></td><td>-</td></tr><tr><td>是否启用抖音解析器</td><td class="center"><code>bool</code></td><td class="center"><code>true</code></td><td>-</td></tr><tr><td>是否启用快手解析器</td><td class="center"><code>bool</code></td><td class="center"><code>true</code></td><td>-</td></tr><tr><td>是否启用微博解析器</td><td class="center"><code>bool</code></td><td class="center"><code>true</code></td><td>-</td></tr><tr><td>是否启用小红书解析器</td><td class="center"><code>bool</code></td><td class="center"><code>true</code></td><td>-</td></tr><tr><td>是否启用推特解析器</td><td class="center"><code>bool</code></td><td class="center"><code>false</code></td><td>-</td></tr></tbody></table><h3 id="推特代理设置" tabindex="-1">推特代理设置 <a class="header-anchor" href="#推特代理设置" aria-label="Permalink to &quot;推特代理设置&quot;">​</a></h3><table class="config-table"><thead><tr><th>配置项</th><th>类型</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>推特图片下载是否使用代理</td><td class="center"><code>bool</code></td><td class="center"><code>false</code></td><td>启用后，推特图片下载将通过代理进行。图片CDN大多被墙，建议开启以提升成功率</td></tr><tr><td>推特视频下载是否使用代理</td><td class="center"><code>bool</code></td><td class="center"><code>false</code></td><td>启用后，推特视频下载将通过代理进行。视频CDN几乎不受影响，通常无需开启以节约流量</td></tr><tr><td>推特代理地址</td><td class="center"><code>string</code></td><td class="center"><code>&quot;&quot;</code></td><td>代理地址格式：<code>http://host:port</code> 或 <code>socks5://host:port</code>。图片和视频共用此代理地址。fxtwitter API接口不需要代理，会自动直连</td></tr></tbody></table><hr><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h2><ol><li><strong>B站</strong>：</li></ol><ul><li>转发动态会使用&quot;转发动态数据（原始动态数据）&quot;组织文本格式解析结果</li></ul><ol start="2"><li><strong>微博</strong>：</li></ol><ul><li>视频直链使用严格风控策略，开启预下载模式保存到本地才能正确发送</li></ul><ol start="3"><li><strong>小红书</strong>：</li></ol><ul><li>所有链接均有身份验证和时效性，在有效期内发送完整链接才能成功解析</li><li>分享链接的解析结果有水印</li></ul><ol start="4"><li><strong>推特</strong>：</li></ol><ul><li>解析 API 使用 fxtwitter 服务，无需代理</li><li>图片CDN大多被墙，建议开启代理</li><li>视频CDN通常不受影响，可直连</li></ul><ol start="5"><li><strong>其他</strong></li></ol><ul><li>插件在任何消息中匹配到 <code>&quot;原始链接：&quot;</code> 字段将静默跳过解析</li><li>这是为了防止多个使用本插件的 Bot 重复解析其他 Bot 发送的文本格式解析结果</li></ul><hr>',33)])])}const m=e(r,[["render",a]]);export{u as __pageData,m as default};
