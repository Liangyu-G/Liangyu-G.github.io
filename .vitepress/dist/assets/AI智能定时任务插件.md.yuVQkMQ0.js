import{_ as a,c as l,o as s,ae as t}from"./chunks/framework.Ck3L_38O.js";const m=JSON.parse('{"title":"AI智能定时任务插件","description":"","frontmatter":{},"headers":[],"relativePath":"AI智能定时任务插件.md","filePath":"AI智能定时任务插件.md"}'),e={name:"AI智能定时任务插件.md"};function o(d,i,r,n,h,c){return s(),l("div",null,[...i[0]||(i[0]=[t(`<h1 id="ai智能定时任务插件" tabindex="-1">AI智能定时任务插件 <a class="header-anchor" href="#ai智能定时任务插件" aria-label="Permalink to &quot;AI智能定时任务插件&quot;">​</a></h1><p>这是一个智能定时任务插件，它可以帮助用户设置智能化的定时提醒和自动执行任务，并支持与AI进行自然语言交互。</p><h2 id="功能特点" tabindex="-1">功能特点 <a class="header-anchor" href="#功能特点" aria-label="Permalink to &quot;功能特点&quot;">​</a></h2><ul><li>支持设置一次性或重复性的定时提醒</li><li>支持设置自动执行任务，到时间后AI会自动执行指定操作</li><li>支持设置指令任务，到时间后直接执行指定指令并转发结果</li><li>支持调用其他LLM函数，实现更复杂的自动化任务</li><li>AI智能化提醒，生成自然语言的提醒内容</li><li>支持多种重复模式：每天、每周、每月、每年</li><li>支持法定节假日判断，可设置仅在工作日或节假日触发的提醒和任务</li><li>支持会话隔离，群聊中每个成员可以有独立的提醒和任务</li><li><strong>支持远程群聊管理，可以在当前群聊中为其他群聊设置、查看和管理任务</strong></li><li>简单的命令管理系统</li><li>持久化存储提醒和任务数据</li></ul><h2 id="使用方法" tabindex="-1">使用方法 <a class="header-anchor" href="#使用方法" aria-label="Permalink to &quot;使用方法&quot;">​</a></h2><h3 id="设置提醒" tabindex="-1">设置提醒 <a class="header-anchor" href="#设置提醒" aria-label="Permalink to &quot;设置提醒&quot;">​</a></h3><p>插件会注册为AI工具，可以直接用自然语言设置提醒，例如：</p><ul><li>&quot;帮我设置一个提醒，明天早上8点提醒我去上班&quot;</li><li>&quot;每天晚上10点提醒我睡觉&quot;</li><li>&quot;每个工作日早上8点提醒我打卡&quot;</li></ul><h3 id="设置任务" tabindex="-1">设置任务 <a class="header-anchor" href="#设置任务" aria-label="Permalink to &quot;设置任务&quot;">​</a></h3><p>除了提醒外，还可以设置任务，让AI在指定时间自动执行操作：</p><ul><li>&quot;设置一个任务，明天早上8点发送今日天气预报&quot;</li><li>&quot;每天中午12点帮我汇总今日新闻&quot;</li><li>&quot;每个天下午5点提醒所有人下班，工作日触发&quot;</li><li>&quot;帮我删了之前布置的开会任务&quot;</li></ul><h3 id="设置指令任务" tabindex="-1">设置指令任务 <a class="header-anchor" href="#设置指令任务" aria-label="Permalink to &quot;设置指令任务&quot;">​</a></h3><p>指令任务是一种特殊的任务类型，不需要AI处理，直接执行指定的指令：</p><ul><li>可以定时执行其他插件的指令，如获取配置、查看状态等</li><li>执行结果会直接转发给用户</li><li>不消耗LLM资源，执行效率更高</li><li>支持复杂指令，使用 <code>--</code> 分隔符避免指令被错误解析</li><li>优化了执行等待时间，支持长时间运行的指令（可以在设置里增加等待时间）</li></ul><h3 id="命令列表" tabindex="-1">命令列表 <a class="header-anchor" href="#命令列表" aria-label="Permalink to &quot;命令列表&quot;">​</a></h3><p>插件提供以下命令用于管理提醒和任务：</p><ol><li>添加提醒： /rmd add &lt;内容&gt; &lt;时间&gt; [开始星期] [重复类型] [节假日类型] 例如：</li></ol><ul><li><code>/rmd add 写周报 8:05 mon weekly</code></li><li><code>/rmd add 上班打卡 8:30 daily workday</code>（每个工作日）</li><li><code>/rmd add 休息提醒 9:00 daily holiday</code>（每个法定节假日）</li></ul><ol start="2"><li>添加任务： /rmd task &lt;内容&gt; &lt;时间&gt; [开始星期] [重复类型] [节假日类型] 例如：</li></ol><ul><li><code>/rmd task 发送天气预报 8:00 daily</code></li><li><code>/rmd task 工作安排 9:00 mon weekly workday</code>（每周一工作日）</li></ul><ol start="3"><li>添加指令任务： /rmd command &lt;指令&gt; &lt;时间&gt; [开始星期] [重复类型] [节假日类型] 例如：</li></ol><ul><li><code>/rmd command /weather 9:00 daily</code>（每天9点获取天气）</li><li><code>/rmd command /news 18:00 mon weekly</code>（每周一18点获取新闻）</li><li><code>/rmd command /rmd--ls 8:00 daily</code>（使用--避免指令被错误分割）</li><li><code>/rmd command /complex--command 10:00</code>（执行复杂指令）</li><li><code>/rmd command /rmd--ls----before--每日提醒 8:00 daily</code>（自定义标识放在开头）</li><li><code>/rmd command /rmd--ls----after--执行完成 8:00 daily</code>（自定义标识放在末尾）</li></ul><ol><li><p>查看所有提醒和任务： /rmd ls</p></li><li><p>删除指定提醒或任务： /rmd rm &lt;序号&gt; 例如：删除第1个提醒 <code>/rmd rm 1</code></p></li><li><p>查看帮助信息： /rmd help</p></li></ol><h3 id="远程群聊管理" tabindex="-1">远程群聊管理 <a class="header-anchor" href="#远程群聊管理" aria-label="Permalink to &quot;远程群聊管理&quot;">​</a></h3><p>插件支持远程群聊管理功能，可以在当前群聊中为其他群聊设置、查看和管理任务：</p><p><strong>远程群聊命令列表：</strong></p><ol><li>在指定群聊中添加提醒： /rmdg add &lt;群聊ID&gt; &lt;内容&gt; &lt;时间&gt; [开始星期] [重复类型] [节假日类型] 例如：</li></ol><ul><li><code>/rmdg add 1234567890 写周报 8:05 daily</code></li></ul><ol start="2"><li>在指定群聊中添加任务： /rmdg task &lt;群聊ID&gt; &lt;内容&gt; &lt;时间&gt; [开始星期] [重复类型] [节假日类型] 例如：</li></ol><ul><li><code>/rmdg task 1234567890 发送天气预报 8:00 daily</code></li></ul><ol start="3"><li>在指定群聊中添加指令任务： /rmdg command &lt;群聊ID&gt; &lt;指令&gt; &lt;时间&gt; [开始星期] [重复类型] [节假日类型] 例如：</li></ol><ul><li><code>/rmdg command 1234567890 /weather 9:00 daily</code></li><li><code>/rmdg command 1234567890 /rmd--ls----before--每日提醒 8:00 daily</code>（自定义标识放在开头）</li><li><code>/rmdg command 1234567890 /rmd--ls----after--执行完成 8:00 daily</code>（自定义标识放在末尾）</li></ul><ol start="4"><li>查看指定群聊的提醒和任务： /rmdg ls &lt;群聊ID&gt; 例如：</li></ol><ul><li><code>/rmdg ls 1234567890</code></li></ul><ol start="5"><li>删除指定群聊中的提醒或任务： /rmdg rm &lt;群聊ID&gt; &lt;序号&gt; 例如：</li></ol><ul><li><code>/rmdg rm 1234567890 1</code></li></ul><ol start="6"><li>查看远程群聊帮助信息： /rmdg help</li></ol><h3 id="使用演示" tabindex="-1">使用演示 <a class="header-anchor" href="#使用演示" aria-label="Permalink to &quot;使用演示&quot;">​</a></h3><p><img src="https://sywb.top/Staticfiles/pic/ys1.png" alt="提醒演示"><img src="https://sywb.top/Staticfiles/pic/ys3.png" alt="自动执行任务"><img src="https://sywb.top/Staticfiles/pic/ys5.png" alt="自动执行任务2"><img src="https://sywb.top/Staticfiles/pic/ys6.png" alt="指令任务"><img src="https://sywb.top/Staticfiles/pic/ys7.png" alt="复杂指令"><img src="https://sywb.top/Staticfiles/pic/ys4.png" alt="人性化回复"><img src="https://sywb.top/Staticfiles/pic/ys8.jpg" alt="群聊1"><img src="https://sywb.top/Staticfiles/pic/ys9.jpg" alt="群聊2"><img src="https://sywb.top/Staticfiles/pic/ys10.png" alt="自义定文字"><img src="https://sywb.top/Staticfiles/pic/ys11.png" alt="自义定文字2"></p><h3 id="重复类型说明" tabindex="-1">重复类型说明 <a class="header-anchor" href="#重复类型说明" aria-label="Permalink to &quot;重复类型说明&quot;">​</a></h3><p>提醒和任务支持以下重复类型：</p><ul><li><code>none</code>: 一次性（默认）</li><li><code>daily</code>: 每天重复</li><li><code>weekly</code>: 每周重复</li><li><code>monthly</code>: 每月重复</li><li><code>yearly</code>: 每年重复</li></ul><h3 id="节假日类型说明" tabindex="-1">节假日类型说明 <a class="header-anchor" href="#节假日类型说明" aria-label="Permalink to &quot;节假日类型说明&quot;">​</a></h3><p>在重复类型的基础上，还可以指定节假日类型：</p><ul><li><code>workday</code>: 仅在工作日触发（法定节假日不触发）</li><li><code>holiday</code>: 仅在法定节假日触发</li></ul><h2 id="会话隔离功能" tabindex="-1">会话隔离功能 <a class="header-anchor" href="#会话隔离功能" aria-label="Permalink to &quot;会话隔离功能&quot;">​</a></h2><h3 id="什么是会话隔离" tabindex="-1">什么是会话隔离？ <a class="header-anchor" href="#什么是会话隔离" aria-label="Permalink to &quot;什么是会话隔离？&quot;">​</a></h3><p>会话隔离功能使群聊中的每个成员都能拥有自己独立的提醒和任务列表，其他成员无法看到或操作。</p><ul><li><strong>关闭状态</strong>：群聊中所有成员共享同一组提醒和任务列表</li><li><strong>开启状态</strong>：群聊中每个成员都有自己独立的提醒和任务列表</li></ul><h3 id="如何启用会话隔离" tabindex="-1">如何启用会话隔离？ <a class="header-anchor" href="#如何启用会话隔离" aria-label="Permalink to &quot;如何启用会话隔离？&quot;">​</a></h3><p>会话隔离功能默认关闭，可以通过管理面板的插件配置开启：</p><ol><li>进入AstrBot管理面板</li><li>找到&quot;插件管理&quot;&gt;&quot;本插件&quot;</li><li>点击&quot;配置&quot;按钮</li><li>将&quot;启用会话隔离&quot;选项勾选，然后保存</li></ol><p><strong>注意</strong>：切换会话隔离模式不会导致数据丢失，只会改变提醒和任务的可见性。</p><h2 id="配置说明" tabindex="-1">配置说明 <a class="header-anchor" href="#配置说明" aria-label="Permalink to &quot;配置说明&quot;">​</a></h2><p>插件会在 <code>/data/plugin_data/ai_reminder</code> 目录下自动创建 <code>reminder_data.json</code> 文件用于存储提醒和任务数据。</p><h3 id="插件配置" tabindex="-1">插件配置 <a class="header-anchor" href="#插件配置" aria-label="Permalink to &quot;插件配置&quot;">​</a></h3><p>插件支持以下配置选项，可通过管理面板进行设置：</p><ul><li><strong>启用会话隔离</strong>：群聊中每个成员拥有独立的提醒和任务列表</li><li><strong>启用上下文功能</strong>：使用用户对话上下文生成更自然的提醒内容</li><li><strong>关闭上下文时的提示词模板</strong>：自定义禁用上下文时的提醒提示词</li><li><strong>最大上下文数量</strong>：限制使用的对话上下文条数（默认5条）</li></ul><p>配置保存在 <code>data/config/ai_reminder_config.json</code> 文件中，也可通过管理面板配置。</p><p>法定节假日数据会缓存在 <code>/data/plugin_data/ai_reminder/holiday_cache.json</code> 文件中，缓存期为30天，过期后会自动更新。</p><h2 id="提醒与任务的区别" tabindex="-1">提醒与任务的区别 <a class="header-anchor" href="#提醒与任务的区别" aria-label="Permalink to &quot;提醒与任务的区别&quot;">​</a></h2><ul><li><strong>提醒</strong>：到时间后会提醒用户做某事，例如&quot;提醒我去开会&quot;</li><li><strong>任务</strong>：到时间后AI会自动执行指定的操作，例如&quot;发送天气预报&quot;或&quot;调用某个函数&quot;</li><li><strong>指令任务</strong>：到时间后直接执行指定的指令并转发结果，不需要AI处理，例如&quot;/memory_config&quot;</li></ul><h2 id="指令任务高级用法" tabindex="-1">指令任务高级用法 <a class="header-anchor" href="#指令任务高级用法" aria-label="Permalink to &quot;指令任务高级用法&quot;">​</a></h2><h3 id="复杂指令支持" tabindex="-1">复杂指令支持 <a class="header-anchor" href="#复杂指令支持" aria-label="Permalink to &quot;复杂指令支持&quot;">​</a></h3><p>当指令包含空格时，系统可能会错误解析。使用 <code>--</code> 分隔符可以避免这个问题：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 错误的方式（会被错误解析为 /rmd）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/rmd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> command</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /rmd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 08:01</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> daily</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 正确的方式（完整指令 /rmd ls）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/rmd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> command</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /rmd--ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 08:01</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> daily</span></span></code></pre></div><h3 id="自定义标识功能" tabindex="-1">自定义标识功能 <a class="header-anchor" href="#自定义标识功能" aria-label="Permalink to &quot;自定义标识功能&quot;">​</a></h3><p>指令任务支持自定义标识，使用 <code>----</code> 分隔符可以自定义显示的文字和位置：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 自定义标识放在开头</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/rmd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> command</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /rmd--ls----before--每日提醒</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8:00</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> daily</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 自定义标识放在末尾</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/rmd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> command</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /rmd--ls----after--执行完成</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8:00</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> daily</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 位置可选：before(开头)、after(末尾)、start(开头)、end(末尾)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 如果不使用 ---- 分隔符，默认显示 [指令任务]</span></span></code></pre></div><h3 id="执行结果转发" tabindex="-1">执行结果转发 <a class="header-anchor" href="#执行结果转发" aria-label="Permalink to &quot;执行结果转发&quot;">​</a></h3><p>指令执行完成后，结果会自动转发给用户，包括：</p><ul><li>文本消息</li><li>图片、文件等多媒体内容</li><li>错误信息（如果执行失败）</li></ul>`,72)])])}const u=a(e,[["render",o]]);export{m as __pageData,u as default};
